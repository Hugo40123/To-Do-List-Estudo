<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projeto To-Do-List</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <!-- Top Bar -->
    <div class="top-bar">
      {% for cat in ["Todos"] + categorias %}
      <a href="{{ url_for('home', filtro=cat) }}">
        <button class="{{ 'active' if filtro == cat else '' }}">
          {{ cat }}
        </button>
      </a>
      {% endfor %}
    </div>

    <!-- Lista de Tarefas -->
    <div class="task-list">
      {% for tarefa in tarefas %}
      <div class="task-card {% if tarefa.feito %}feito{% endif %}">
        <div class="task-info">
          <h3>{{ tarefa.texto }}</h3>
          {% if tarefa.prazo %}
          <p class="prazo">Prazo: {{ tarefa.prazo }}</p>
          {% endif %} {% if tarefa.categoria %}
          <span class="categoria">{{ tarefa.categoria }}</span>
          {% endif %}
        </div>

        <div class="task-actions">
          <form action="/concluir" method="POST" style="display: inline">
            <input type="hidden" name="tarefa" value="{{ tarefa.texto }}" />
            <button type="submit" class="btn-concluir">‚úì</button>
          </form>
          <form action="/remove" method="POST" style="display: inline">
            <input type="hidden" name="tarefa" value="{{ tarefa.texto }}" />
            <button type="submit" class="btn-deletar">üóëÔ∏è</button>
          </form>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Bot√£o flutuante -->
    <button class="fab" onclick="abrirModal()">+</button>

    <!-- Modal -->
    <div class="modal" id="modal">
      <div class="modal-content">
        <span class="close" onclick="fecharModal()">&times;</span>
        <form action="/add" method="POST">
          <!-- Descri√ß√£o -->
          <input
            type="text"
            name="tarefa"
            placeholder="Descri√ß√£o da Tarefa"
            required
            class="input-descricao"
          />

          <!-- Categoria -->
          <button
            type="button"
            class="btn-categoria"
            onclick="abrirCategoria()"
          >
            üìÇ Selecionar Categoria
          </button>
          <div class="categoria-popup" id="categoria-popup">
            {% for cat in categorias %}
            <div
              class="categoria-item"
              onclick="selecionarCategoria('{{ cat }}')"
            >
              {{ cat }}
            </div>
            {% endfor %}
          </div>
          <input type="hidden" name="categoria" id="categoria-input" />

          <!-- Data -->
          <button type="button" class="btn-data" onclick="abrirCalendario()">
            üìÖ Selecionar Data
          </button>
          <div class="calendario-popup" id="calendario-popup">
            <div class="calendario-header">
              <button type="button" onclick="prevMes()">&#8249;</button>
              <span id="mes-ano"></span>
              <button type="button" onclick="nextMes()">&#8250;</button>
            </div>
            <div class="dias-semana">
              <span>Dom</span><span>Seg</span><span>Ter</span><span>Qua</span
              ><span>Qui</span><span>Sex</span><span>S√°b</span>
            </div>
            <div class="dias" id="dias"></div>
          </div>

          <input
            type="date"
            name="data"
            id="data-input"
            style="display: none"
          />
          <input
            type="time"
            name="hora"
            id="hora-input"
            placeholder="Hora (opcional)"
          />

          <!-- Adicionar -->
          <button type="submit" class="btn-adicionar">Adicionar</button>
        </form>
      </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
